{"version":3,"sources":["utilities.js","SongsView.js","PlaylistsView.js","index.js"],"names":["getQueryVariable","query","variable","vars","split","i","length","pair","decodeURIComponent","console","log","serverUrl","parseName","title","newTitle","replace","blacklist","removeAfter","trim","toLowerCase","song","scrollOptions","damping","thumbMinSize","renderByPixels","document","alwaysShowTracks","continuousScrolling","overscrollOptions","enable","effect","navigator","userAgent","match","maxOverscroll","glowColor","c","createElement","ctx","getContext","getImageColour","imageUrl","a","Promise","resolve","reject","img","Image","crossOrigin","onload","clearRect","width","height","drawImage","imgData","getImageData","avgR","avgG","avgB","total","data","alpha","onerror","src","MergeTypeRadio","props","className","data-tooltip","helpText","data-tooltip-persisten","type","name","id","text","defaultChecked","htmlFor","onClick","ExportButton","logoUrls","logoMult","logoSizes","logoSize","this","platform","logoUrl","export","disabled","alt","React","Component","SongItem","artists","style","minWidth","color","col","SongsView","state","included","Array","excluded","songsItems","songs","map","val","idx","imgUrl","track","album","images","url","e","songId","x","join","hue","sat","toString","playlistId","snippet","thumbnails","default","videoOwnerChannelTitle","etag","mergeHelp","changeSortType","Scrollbar","init","getElementById","plugins","overscroll","axios","require","PlaylistItemExtra","maxHeight","show","hovering","PlaylistItem","songsNum","extra","hover","decorate","bind","toggle","get","params","endpoint","then","catch","error","JSON","stringify","part","response","sendSongs","tracks","setState","items","contentDetails","itemCount","medium","slice","setHover","s","onMouseEnter","onMouseLeave","remove","info","PlaylistsView","textValue","handleChange","addPlaylist","watchEnter","playlistItems","playlists","removePlaylist","highlightHelp","showHelp","placeholder","value","onChange","onKeyPress","playlistLink","URL","search","substring","includes","parsePlatform","parsePlaylistId","event","target","evt","charCode","use","OverscrollPlugin","Main","exporting","hashParams","window","location","hash","regParams","allSongs","sortType","helping","highlightingHelp","helpPage","interactTimeout","setTimeout","helpPageSelectorX","helpPageSelectorW","addSongs","authorize","toggleHelp","helpPagesButtons","item","classNames","num","offsetWidth","offsetLeft","setHelpPage","opacity","pointerEvents","transform","left","sortSongs","prevRes","newTracks","Object","assign","addColours","key","newSongs","concat","next","res","newPlaylists","start_len","filter","playlist","urlParams","URLSearchParams","paramsObj","client_id","response_type","redirect_uri","origin","scope","paramsStr","entries","k","v","encodeURIComponent","href","parse","access_token","headers","Authorization","meRes","myId","createRes","method","description","playlistSongs","page","Math","ceil","pageSongs","uris","addRes","rgb","hsl","colorsys","rgb_to_hsv","r","g","b","h","round","keys","sort","array","j","floor","random","shuffleArray","ReactDOM","render"],"mappings":"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","file":"static/js/main.4bbbf7ae.chunk.js","sourcesContent":["\nconst paramify = (params) => \"?\"+Object.entries(params).map(([k, v]) => `${encodeURIComponent(k)}=${encodeURIComponent(v)}`).join('&');\n\n// https://stackoverflow.com/questions/2090551/parse-query-string-in-javascript\nfunction getQueryVariable(query, variable) {\n  var vars = query.split('&');\n  for (var i = 0; i < vars.length; i++) {\n    var pair = vars[i].split('=');\n    if (decodeURIComponent(pair[0]) === variable) {\n      return decodeURIComponent(pair[1]);\n    }\n  }\n  console.log('Query variable %s not found', variable);\n}\n\n\n// cost serverUrl = \"http://192.168.43.62:3003\"; // hotspot\n// const serverUrl = \"http://10.1.1.193:3003\"; // home\nconst serverUrl = \"https://sheltered-caverns-34537.herokuapp.com\"; // heroku\n\n\n\n// takes a title and tries to parse the name of the song (or a search term)\n// returns a list of ranked possibilities\nconst parseName = title=>{\n  // first makes it safe\n  // remove things in brackets\n  // remove things from blacklist (e.g. music video, feat)\n  // remove anything after 'ft.' 'feat' 'prod\n\n  // remove brackets [] and () and their content\n  let newTitle = title.replace(/\\([^\\)]*\\)/g, '');\n  newTitle = newTitle.replace(/\\[[^\\]]*\\]/g, '');\n\n  // making it safe\n  newTitle = sanitizeString(newTitle);\n  // remove duplicate spaces\n  newTitle = newTitle.replace( /\\s\\s+/g, ' ' );\n  \n  const blacklist = [\n    \"official music video\",\n    \"music video\",\n    \"official mv\",\n    \"video\",\n    \"official video\",\n    \"official visualizer\",\n    \"visualizer\",\n    \"audio\",\n    \"official audio\",\n  ];\n  const removeAfter = [\"ft.\", \" feat\", \"prod\"];\n\n  newTitle = newTitle.toLowerCase();\n\n  for(let i=0; i<blacklist.length;i++){\n    newTitle = newTitle.replace(blacklist[i], \"\");\n  }\n  // remove anything after ft or feat (feat gets featuring too)\n  for(let i=0; i<removeAfter.length;i++){\n    newTitle = newTitle.split(removeAfter[i])[0];\n  }\n  newTitle = newTitle.trim()\n\n\n  let song = newTitle.split(\"-\")\n  song = song[song.length-1].trim();\n\n  // remove dashes at end so you can get song name\n  newTitle = newTitle.replace(/[\\-+]/g, '');\n  // remove double space again\n  newTitle = newTitle.replace( /\\s\\s+/g, ' ');\n  \n  return [newTitle, song]\n}\n\n// https://stackoverflow.com/questions/23187013/is-there-a-better-way-to-sanitize-input-with-javascript\nfunction sanitizeString(str){\n  str = str.replace(/[^a-z0-9áéíóúñü \\.,_-]/gim,\"\");\n  return str.trim();\n}\n\nconst scrollOptions = {\n  damping: 0.1,\n  thumbMinSize: 20,\n  renderByPixels: !('ontouchstart' in document),\n  alwaysShowTracks: false,\n  continuousScrolling: true,\n};\n\nconst overscrollOptions = {\n  enable: true,\n  effect: navigator.userAgent.match(/Android/) ? 'glow' : 'bounce',\n  damping: 0.2,\n  maxOverscroll: 150,\n  glowColor: '#222a2d',\n};\n\nconst c = document.createElement(\"canvas\");\nvar ctx = c.getContext(\"2d\");\n\nvar canvasLock = false;\n\n// https://www.w3schools.com/tags/canvas_getimagedata.asp\nasync function getImageColour(imageUrl){\n  return new Promise((resolve, reject)=>{\n    let img = new Image();\n    img.crossOrigin = \"Anonymous\";\n    img.onload = ()=>{\n      // waits until the canvas isnt being used\n      // while(canvasLock == true){}\n      canvasLock = true;\n      ctx.clearRect(0, 0, c.width, c.height)\n      ctx.drawImage(img, 0, 0);\n      let imgData = ctx.getImageData(0, 0, c.width, c.height);\n      canvasLock = false;\n\n      let avgR = 0\n      let avgG = 0\n      let avgB = 0\n      let total = 0\n      for (let i = 0; i < imgData.data.length; i += 4) {\n        // weights colour by its transparency\n        const alpha = imgData.data[i+3];\n        total += alpha\n        avgR += imgData.data[i] * alpha\n        avgG += imgData.data[i + 1] * alpha\n        avgB += imgData.data[i + 2] * alpha\n      }\n      resolve([avgR/total, avgG/total, avgB/total]);\n    };\n    img.onerror = reject\n    img.src = imageUrl\n    img.crossOrigin = \"Anonymous\";\n  })\n}\n\nfunction shuffleArray(array) {\n    for (let i = array.length - 1; i > 0; i--) {\n        const j = Math.floor(Math.random() * (i + 1));\n        [array[i], array[j]] = [array[j], array[i]];\n    }\n}\n\nexport {\n  sanitizeString,\n  parseName,\n  serverUrl,\n  getQueryVariable,\n  paramify,\n  overscrollOptions,\n  scrollOptions,\n  getImageColour,\n  shuffleArray\n}","import React from 'react';\nimport './index.css';\nimport Scrollbar from 'smooth-scrollbar';\nimport { parseName, scrollOptions, overscrollOptions } from './utilities';\n\n\nconst MergeTypeRadio = (props) => {\n  return (\n    <span className=\"mergeTypeOuter\" data-tooltip={props.helpText} data-tooltip-persisten>\n        <input type=\"radio\" name=\"mergeType\" id={props.text} className=\"mergeTypeInput\" defaultChecked></input>\n        <label className=\"mergeTypeLabel\" htmlFor={props.text} onClick={()=>props.onClick(props.type)}>{props.text}</label>\n    </span>\n  )\n}\n\nclass ExportButton extends React.Component{\n  constructor(props){\n    super(props);\n    this.logoUrls = {\n      \"spotify\":\"logos/spotify.png\",\n      \"download\":\"logos/download.png\", // TODO\n      \"soundcloud\":\"logos/soundcloud.png\", \n      \"youtube\":\"logos/youtube.png\",\n      \"apple\":\"logos/apple.svg\", // TODO\n    }\n    this.logoMult = 15;\n    this.logoSizes = {\n      \"spotify\":[1, 1],\n      \"download\":[1,1],\n      \"soundcloud\":[1.5, 1],\n      \"youtube\":[1.4, 1],\n      \"apple\":[1, 1]\n    }\n  }\n  render(){\n    let logoSize = this.logoSizes[this.props.platform];\n    let logoUrl = this.logoUrls[this.props.platform];\n    return (\n      <button\n        onClick={()=>this.props.export(this.props.platform)}\n        className={`exportButton noselect ${this.props.platform}Fill ${this.props.disabled ? \"disabled\":\"\"}`}\n      >\n        <img alt=\"\" src={logoUrl} width={`${logoSize[0]*this.logoMult}`} height={`${logoSize[1]*this.logoMult}`} className=\"exportButtonIcon\"></img>\n        {this.props.text}\n        \n      </button>\n    )\n  }\n}\n\nfunction SongItem(props) {\n  return (\n    <div className=\"songItemExtra\">\n      <div className=\"songItem\">\n        <img alt=\"\" src={props.img} className=\"songItemImg\"></img>\n        <h3 className=\"songItemTitle\">{parseName(props.name)[0]}</h3>\n        <p className=\"songItemArtists\">{props.artists}</p>\n        <span style={{minWidth:\"20px\", color:props.col}}>██</span>\n      </div>\n    </div>\n  )\n}\n\nclass SongsView extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      included: Array(0),\n      excluded: Array(0),\n    }\n  }\n  render(){\n    // generates song items\n    const songsItems = this.props.songs.map((val, idx)=>{\n      if(val.platform === \"spotify\"){\n        let imgUrl;\n        try{\n          imgUrl = val.track.album.images[2].url;\n        }catch(e){\n          imgUrl = \"/spotify-default-thumb.png\";\n        }\n        const songId = val.track.id ?? idx\n        return <SongItem \n          key={songId.toString()+val.playlistId}\n          name={val.track.name}\n          img={imgUrl}\n          artists={val.track.artists.map((x)=>x.name).join(\", \")}\n          col={`hsl(${val.hue}, ${val.sat}%, ${val.val}%)`}\n        />\n      }\n      if(val.platform === \"youtube\"){\n        return <SongItem\n          key={val.etag}\n          name={val.snippet.title}\n          img={val.snippet.thumbnails.default.url}\n          artists={val.snippet.videoOwnerChannelTitle}\n        />\n      }\n      return null; // complains if there isnt an unconditional return\n    });\n\n    const mergeHelp = {\n      all:\"Songs in ALL playlists\",\n      only:\"Songs in ONLY ONE playlist\",\n      any:\"Songs in ANY NUMBER of playlists\",\n    }\n\n    return (\n      <div className=\"halfDiv\" id=\"songsViewContainer\">\n        <div id=\"songsTopBar\">\n          <div id=\"songsTopBarInfo\">\n            <p id=\"songsNum\">{this.props.songs.length} Songs</p>\n            {/* <p id=\"songsIncluded\">+{this.state.included.length}</p> */}\n            {/* <p id=\"songsExcluded\">-{this.state.excluded.length}</p> */}\n          </div>\n\n          <div id=\"songsTopBarType\">\n            <MergeTypeRadio text=\"Hue\"  type=\"hue\"  onClick={this.props.changeSortType} helpText={mergeHelp.all}/>\n            <MergeTypeRadio text=\"val\" type=\"val\" onClick={this.props.changeSortType} helpText={mergeHelp.only}/>\n            <MergeTypeRadio text=\"oangfaso\"  type=\"rand\"  onClick={this.props.changeSortType} helpText={mergeHelp.any}/>\n          </div>\n        </div>\n        <div id=\"songsContainer\">\n          <div>{songsItems}</div>\n        </div>\n\n        <div id=\"songsExport\">\n          <ExportButton export={this.props.export} text=\"Spotify\" platform=\"spotify\" />\n          {/* <ExportButton export={this.props.export} text=\"Youtube\" platform=\"youtube\" disabled={true} />\n          <ExportButton export={this.props.export} text=\"Apple Music\" platform=\"apple\" disabled={true} />\n          <ExportButton export={this.props.export} text=\"Download\" platform=\"download\" disabled={false} /> */}\n        </div>\n\n      </div>\n    )\n  }\n  componentDidUpdate(){\n    Scrollbar.init(\n      document.getElementById('songsContainer'), {\n      plugins: {\n        overscroll: {...overscrollOptions},\n      },\n      ...scrollOptions\n    });\n  }\n}\n\nexport default SongsView","import React from 'react';\nimport { serverUrl, getQueryVariable, scrollOptions, overscrollOptions } from './utilities';\nimport Scrollbar from 'smooth-scrollbar';\nconst axios = require('axios'); // dont know difference between require and import\n\n\nclass PlaylistItemExtra extends React.Component{\n  render(){\n    console.log(\"rendered extra\");\n    let maxHeight = \"0\";\n    if(this.props.show){\n      maxHeight = \"200px\";\n    }else{\n      if(this.props.hovering){\n        maxHeight = \"20px\";\n      }\n    }\n\n    return (\n      <div style={{maxHeight:maxHeight}} className=\"playlistItemExtra\">\n        <div className=\"playlistItemExtraInner\">\n          <p className=\"playlistItemText\">penis</p>\n        </div>\n      </div>\n    )\n  }\n}\n\nclass PlaylistItem extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      name: props.name,\n      songsNum: \"#\",\n      img: \"loading.svg\",\n      extra:false,\n      hover:false,\n    }\n\n    this.decorate = this.decorate.bind(this);\n    this.toggle = this.toggle.bind(this);\n\n    if( this.props.platform === \"spotify\"){\n      axios.get(`${serverUrl}/spotify/`, {\n        params: {endpoint:`playlists/${this.props.id}`}\n      })\n      .then(this.decorate)\n      .catch(function (error) {\n        console.log(error);\n      })\n    }\n    if( this.props.platform === \"youtube\"){\n      axios.get(`${serverUrl}/youtube`, {\n        params: {\n          endpoint:\"playlists\",\n          query: JSON.stringify({\n            part:\"snippet,contentDetails\",\n            id:this.props.id\n          })\n        }\n      })\n      .then(this.decorate)\n      .catch(function (error) {\n        console.log(error);\n      })\n      // playlists?part=snippet&part=contentDetails&part=id&part=status&id=RDCLAK5uy_kbqXHXB9aBQaqThDKOimGGcZEPubq3znc\n  \n    }\n  }\n  decorate(response){\n    console.log(response);\n    if(this.props.platform === \"spotify\"){\n      this.props.sendSongs(response.data.tracks, this.props.platform, this.props.id);\n      this.setState({\n        name: response.data.name,\n        songsNum:response.data.tracks.total,\n        img: response.data.images[0].url\n      })\n    }\n    if(this.props.platform === \"youtube\"){\n      this.props.sendSongs(null, this.props.platform, this.props.id);\n      this.setState({\n        name:response.data.items[0].snippet.title,\n        songsNum:response.data.items[0].contentDetails.itemCount,\n        img:response.data.items[0].snippet.thumbnails.medium.url,\n      });\n    }\n    if(this.state.name.length > 30){\n      this.setState({name:this.state.name.slice(0, 23)+\"...\"})\n    }\n  }\n  render(){\n    const setHover = (s)=>{this.setState({hovering:s})};\n\n    return (\n      <div className=\"playlistItemOuter\" onClick={this.toggle}>\n        <div \n          className={`playlistItem ${this.props.platform}Border`}\n          onMouseEnter={() => setHover(true)}\n          onMouseLeave={() => setHover(false)}\n        >\n          <div className=\"playlistItemMain\">\n            <img src={this.state.img} className=\"playlistItemImage\" alt=\"\"></img>\n            <div className=\"playlistItemContent\">\n              <p className=\"playlistItemTitle\">{this.state.name}</p>\n              <p className=\"playlistItemSongsNum\">{`${this.state.songsNum} songs`}</p>\n            </div>\n          </div>\n          <div className=\"playlistItemCloseDiv\">\n            <button className=\"playlistItemRemove\" onClick={this.props.remove}>\n              <img className=\"playlistItemCloseImg\" src=\"close.svg\"></img>\n            </button>\n          </div>\n        </div>\n        <PlaylistItemExtra hovering={this.state.hovering} show={this.state.extra} info={{data:\"uhhhh\"}}/>\n      </div>\n    )\n  }\n  toggle(){\n    console.log(\"toggled\", this);\n    console.log(this.state.extra, !this.state.extra);\n    this.setState({extra: !this.state.extra});\n  }\n}\n\nclass PlaylistsView extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      textValue:\"\"\n    }\n    this.handleChange = this.handleChange.bind(this);\n    this.addPlaylist = this.addPlaylist.bind(this);\n    this.watchEnter = this.watchEnter.bind(this);\n  }\n  render(){\n    const playlistItems = this.props.playlists.map((val, idx) => {\n      const remover = ()=>this.props.removePlaylist(val.id, val.platform);\n      return <PlaylistItem\n        sendSongs={this.props.sendSongs}\n        remove={remover}\n        key={val.id+val.platform}\n        name=\"Loading...\"\n        id={val.id}\n        platform={val.platform}\n      />;\n    });\n\n    let helpStyles = this.props.highlightHelp?\"#666\":\"#ccc\";\n\n    return (\n      <div className=\"halfDiv\" id=\"playlistViewContainer\">\n        <div id=\"playlistSearchContainer\" className=\"\">\n          <p \n            className={this.props.highlightHelp?\"playlistHelpHighlight\":\"\"}\n            id=\"playlistHelp\" onClick={this.props.showHelp}>Help</p>\n\n          <input\n            id=\"playlistSearch\"\n            type=\"text\"\n            placeholder=\"Playlist Link\"\n            value={this.state.textValue}\n            onChange={this.handleChange}\n            onKeyPress={this.watchEnter}>\n          </input>\n          <button id=\"playlistAdd\" type=\"button\" onClick={this.addPlaylist}>+</button> \n          {/* <span className=\"tooltiptext\"><a id=\"tooltipHelpLink\" href=\"help\">Help</a></span> */}\n        </div>\n        <div id=\"playlistsContainer\">\n          <div id=\"playlistsInnerContainer\">\n            {playlistItems}\n          </div>\n        </div>\n\n      </div>\n    )\n  }\n  componentDidUpdate(){\n    Scrollbar.init(\n      document.getElementById('playlistsContainer'), {\n      plugins: {\n        overscroll: {...overscrollOptions},\n      },\n      ...scrollOptions\n    });\n  }\n  parsePlaylistId(playlistLink, platform){\n    // returns: playlistId, platform\n    if(platform === \"spotify\"){\n      let s = playlistLink.split(\"/\");\n      return s[s.length-1].split(\"?\")[0];\n    }\n    if(platform === \"youtube\"){\n      let params = new URL(playlistLink).search.substring(1)\n      console.log(params)\n      return getQueryVariable(params, \"list\")\n    }\n  }\n  parsePlatform(playlistLink){\n    let s = playlistLink.split(\"/\");\n    if( s.includes(\"open.spotify.com\")){\n      return \"spotify\";\n    }\n    if( s.includes(\"youtube.com\") || s.includes(\"music.youtube.com\")){\n      return \"youtube\";\n    }\n  }\n  addPlaylist(){\n    let platform = this.parsePlatform(this.state.textValue);\n    let id = this.parsePlaylistId(this.state.textValue, platform);\n    this.props.addPlaylist(id, platform);\n    this.setState({textValue:\"\"});\n  }\n  handleChange(event) {\n    this.setState({textValue: event.target.value});\n  }\n  watchEnter(evt){\n    if(evt.charCode === 13){\n      this.addPlaylist();\n    }\n  }\n}\n\nexport default PlaylistsView","import Scrollbar from 'smooth-scrollbar';\nimport OverscrollPlugin from 'smooth-scrollbar/plugins/overscroll';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SongsView from './SongsView.js';\nimport PlaylistsView from './PlaylistsView.js';\nimport { serverUrl, getQueryVariable, parseName, paramify, getImageColour, shuffleArray } from './utilities.js';\nimport colorsys from 'colorsys';\nconst axios = require('axios'); // dont know difference between require and import\n\nScrollbar.use(OverscrollPlugin);\n\n// to stop creating tones of playlists when testing\nconst EXPORT_SAFE = true;\n\nclass Main extends React.Component{\n  constructor(props){\n    super(props);\n\n    this.exporting = false\n    const hashParams = window.location.hash.slice(1); // spotify redirect uses hash\n    const regParams = window.location.search.slice(1);\n    if(hashParams || regParams){\n      console.log('set exporting')\n      this.export(hashParams || regParams);\n    }\n\n    this.state = {\n      allSongs: {},\n      playlists: Array(0),\n      exporting:this.exporting,\n      sortType: \"hue\",\n      helping:false,\n      highlightingHelp:false,\n      helpPage:0,\n    }\n\n    const needsHelp = ()=>{\n      // if the user hasnt added a playlist after some seconds\n      // highlight the help button\n      console.log(\"highlighted help\");\n      if(this.state.playlists.length === 0 && this.state.helping === false){\n        this.setState({highlightingHelp:true});\n      }\n    }\n    this.interactTimeout = setTimeout(needsHelp, 5000);\n\n    this.helpPageSelectorX = 0;\n    this.helpPageSelectorW = \n\n    this.addSongs = this.addSongs.bind(this); \n    this.addPlaylist = this.addPlaylist.bind(this);\n    this.removePlaylist = this.removePlaylist.bind(this);\n    this.export = this.export.bind(this);\n    this.authorize = this.authorize.bind(this);\n  }\n\n  render(){\n\n    // callback used by SongsView to set the sort type state\n    const setSortType = type=>{this.setState({sortType:type})}\n\n    const toggleHelp = ()=>{this.setState({helping:!this.state.helping, highlightingHelp:false})};\n\n    const setHelpPage = (e, num)=>{\n      this.helpPageSelectorW=e.target.offsetWidth;\n      this.helpPageSelectorX=e.target.offsetLeft;\n      this.setState({helpPage:num})\n    };\n\n    const helpPagesButtonInfo = [\n      {text:\"Playlist Link\"},\n      {text:\"Sort Type\"},\n      {text:\"Exporting\"},\n    ]\n    const helpPagesButtons = helpPagesButtonInfo.map((item, idx)=>{\n      let classNames = \"helpPlatformBarItem noselect \"\n      if(idx === this.state.helpPage){\n        classNames += \"helpPlatformBarButtonSelected\"\n      }\n      return <span\n        key={idx}\n        className={classNames}\n        onClick={e=>setHelpPage(e, idx)}>{item.text}\n      </span>\n    });\n\n    return (\n      <div id=\"main\">\n        {this.state.exporting &&\n          <div id=\"exportOverlayOuter\">\n            <div id=\"darkOverlayBackground\"></div>\n            <div id=\"darkOverlay\">\n              <h2 id=\"exportingTitle\">Exporting {this.state.allSongs.length} song(s) to {this.state.exporting}</h2>\n            </div>\n          </div>\n        }\n        <div id=\"helpOverlayOuter\">\n          <div\n            id=\"darkOverlayBackground\"\n            onClick={toggleHelp}\n            style={{opacity:this.state.helping?0.4:0, pointerEvents: this.state.helping?\"auto\":\"none\"}}>\n          </div>\n          <div id=\"darkOverlay\" style={{\n            transform:this.state.helping?\"translate(-50%, -50%)\":\"translate(-50%, -180%)\",\n            pointerEvents: this.state.helping?\"auto\":\"none\"\n          }}>\n            <span id=\"helpPlatformBar\">\n              {helpPagesButtons}\n              {/* <span className=\"helpPlatformBarItem\" onClick={e=>setHelpPage(e, 0)}>Spotify</span>\n              <span className=\"helpPlatformBarItem\" onClick={e=>setHelpPage(e, 1)}>Youtube</span>\n              <span className=\"helpPlatformBarItem\" onClick={e=>setHelpPage(e, 2)}>Apple Music</span> */}\n              {/* first one has a 'underline' */}\n              <div id=\"helpPlatformBarSelector\" style={{left:this.helpPageSelectorX+\"px\", width:this.helpPageSelectorW+\"px\"}}></div> \n            </span>\n            <div id=\"helpOverlayContent\">\n              <h1 id=\"helpingTitle\">To get </h1>\n            </div>\n          </div>\n        </div>\n        <header></header>\n        <div id=\"content\">\n          <PlaylistsView\n            addPlaylist={this.addPlaylist}\n            sendSongs={this.addSongs}\n            playlists={this.state.playlists}\n            removePlaylist={this.removePlaylist}\n            showHelp={toggleHelp}\n            highlightHelp={this.state.highlightingHelp}\n          />\n          <SongsView\n            songs={this.sortSongs(this.state.allSongs, this.state.sortType)}\n            export={this.authorize}\n            changeSortType={setSortType}\n          />\n          <hr id=\"midBreak\"></hr>\n        </div>\n      </div>\n    );\n  }\n\n  async addSongs(prevRes, platform, id){\n    // takes the previous respose, adds its songs to the songs lists\n    // then requests the next group of songs by calling its self\n    // or if no prevRes, request the first group of songs\n    console.log(prevRes);\n\n    // add the songs from prevRes\n    // adds the playlist id and platform to each track\n    if(prevRes){\n      console.log(\"had prev res\");\n      const newTracks = prevRes.items.map((val, idx) => {\n        return Object.assign(val, {playlistId:id, platform:platform})\n      })\n      await this.addColours(newTracks)\n      let key = platform.toString()+id.toString();\n      let newSongs = {...this.state.allSongs};\n      console.log(this.state.allSongs);\n      console.log(newSongs);\n      if(key in newSongs){\n        newSongs[key] = newSongs[key].concat(newTracks)\n      }else{\n        newSongs[key] = newTracks;\n      }\n      this.setState({allSongs:newSongs});\n    }\n\n    if(platform === \"spotify\"){\n      const url = `${serverUrl}/spotify/`;\n      let endpoint;\n      if(prevRes){\n        if(prevRes.next != null){ // if you had a prevRes and there is a next\n          endpoint = prevRes.next.split(\"v1/\")[1]\n        }else{ // if you had a prevRes but there is not next\n          console.log(\"reached end of playlist\");\n          return;\n        }\n      }else{ // no prevRes\n        endpoint = `playlists/${id}/tracks/?offset=0&limit=100`;\n      }\n      let res = await axios.get(url, {\n        params:{\n          endpoint:endpoint\n        }\n      });\n      await this.addSongs(res.data, platform, id);\n    }\n    return this.state.allSongs;\n  }\n\n  addPlaylist(id, platform){\n    const newPlaylists = this.state.playlists.concat({id:id, platform:platform});\n    this.setState({playlists: newPlaylists, highlightingHelp: false});\n  }\n\n  removePlaylist(id, platform){\n    // findes the index of the playlist with given id and platform and removes it\n    let start_len = this.state.playlists.length\n    let newPlaylists = [...this.state.playlists]\n    newPlaylists.filter(playlist=>playlist.id!=id||playlist.platform!=platform)\n    if(this.state.playlists.length == start_len){\n      console.log(\"invalid id to remove\");\n      return;\n    }\n    // const newSongs = this.state.allSongs.filter( s=> !(s.playlistId===id && s.platform===platform) );\n    const key = platform.toString()+id.toString()\n    let newSongs = {...this.state.allSongs}\n    delete newSongs[key]\n    console.log(newSongs.length);\n    this.setState({playlists:newPlaylists, allSongs:newSongs});\n  }\n\n  // first step of exporting, redirects to spotify, gives a url to return to\n  // and a state to have as params on return\n  authorize(platform){\n    console.log(platform);\n    const urlParams = new URLSearchParams(window.location.search);\n    console.log(urlParams);\n    if(platform === \"spotify\"){\n      const paramsObj = {\n        client_id:      'e9901c5f654f4f58abb0d07a723dfd30',\n        response_type:  'token',\n        redirect_uri:   window.location.origin,\n        state:          JSON.stringify({exporting:\"spotify\", playlists:this.state.playlists, sortType:this.state.sortType}),\n        scope:          \"playlist-modify-private playlist-modify-public\",\n      }\n      const paramsStr = paramify(paramsObj);\n      window.location.href = \"https://accounts.spotify.com/authorize\"+paramsStr;\n    }\n  }\n\n  // called after the return from spotify auth\n  async export(params){\n    // called when there are hash or querey parameters to export a playlist\n    this.exporting = \"spotify\"\n    console.log(\"sending spotify playlist\");\n    let state = JSON.parse(getQueryVariable(params, \"state\"));\n    const access_token = getQueryVariable(params, \"access_token\");\n    console.log(state);\n    \n    // get the user id\n    const meRes = await axios.get(\n      \"https://api.spotify.com/v1/me\",\n      {\n        headers:{\n          Authorization:`Bearer ${access_token}`\n        }\n    });\n    const myId = meRes.data.id\n    console.log(meRes);\n    \n    // create the playlist\n    let createRes = null;\n    if(EXPORT_SAFE){\n      try{\n        createRes = await axios({\n          method: 'post',\n          url: `https://api.spotify.com/v1/users/${myId}/playlists`,\n          headers: {\n            Authorization:`Bearer ${access_token}`,\n            \"Content-Type\":\"application/json\",\n          }, \n          data: {\n            name:\"New Playlister Playlist\",\n            description:\"An awsome playlist created with playlister\"\n          }\n        });\n        console.log(createRes);\n      }catch(error){\n        console.log(error);\n        return;\n      }\n    }\n\n    // for each playlist convert it from [{id, platform}] to [spotifyUri]\n    // then sends them to spotify\n    for(let i=0; i<state.playlists.length;i++){\n      const playlistSongs = state.playlists[i];\n      console.log(playlistSongs);\n\n      // goes through songs 100 at a time\n      for(let page=0; page < Math.ceil(playlistSongs.length/100); page++){\n        const pageSongs = playlistSongs.slice(page*100, (page+1)*100)\n        // adds to final playlist\n        if(EXPORT_SAFE){\n          try{\n            const addRes = await axios({\n              method: 'post',\n              url: `https://api.spotify.com/v1/playlists/${createRes.data.id}/tracks`,\n              headers: {\n                Authorization:`Bearer ${access_token}`,\n                \"Content-Type\":\"application/json\",\n              }, \n              data: JSON.stringify({\n                uris:pageSongs\n              })\n            });\n            console.log(addRes);\n          }catch(error){\n            console.log(error);\n          }\n        }\n      }\n    }\n  }\n\n  // takes list of song objects and adds colour values to each \n  async addColours(songs){\n    for(let song of songs){\n      if(!(\"hue\" in song)){\n        let rgb;\n        try{\n          rgb = await getImageColour(song.track.album.images[2].url)\n        }catch(e){\n          rgb = [40, 40, 40];\n        }\n        const hsl = colorsys.rgb_to_hsv({r: rgb[0], g: rgb[1], b: rgb[2] })\n        // console.log(`hsl: ${hsl.h}, ${hsl.s}, ${hsl.v}  r,g,b: ${rgb[0]},${rgb[1]},${rgb[2]}`);\n        song[\"hue\"] = hsl.h\n        song[\"sat\"] = hsl.s\n        song[\"val\"] = hsl.v\n        // fixes issues wth black and white images\n        if(song.sat < 10 || song.val < 10 || song.val > 90){\n            song.hue = Math.round(95-song.val*0.05)\n        }\n      }\n    }\n  }\n\n  sortSongs(allSongs, sortType){\n    let songs = []\n    for(let key of Object.keys(allSongs)){\n      songs = songs.concat(allSongs[key])\n    }\n    // console.log(songs);\n    if(sortType.toLowerCase() === \"hue\"){\n      return songs.sort((a, b)=>{\n        if(!(\"hue\" in a)){\n            return 1\n        }\n        if(!(\"hue\" in b)){\n            return -1\n        }\n        return a.hue - b.hue\n      })\n    }\n    if(sortType.toLowerCase() === \"val\"){\n        return songs.sort((a, b)=>{\n            if(!(\"val\" in a)){\n                return 1\n            }\n            if(!(\"val\" in b)){\n                return -1\n            }\n            return a.val - b.val\n        })\n    }\n    if(sortType.toLowerCase() === \"rand\"){\n        return shuffleArray(songs)\n    }\n  }\n}\n\n\nReactDOM.render(\n    <Main />,\n    document.getElementById('root')\n  );\n"],"sourceRoot":""}